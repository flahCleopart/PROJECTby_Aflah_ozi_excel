<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Game Pesawat Tembak</title>

<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: Arial, sans-serif;
  background: url("bg-luar.jpg") no-repeat center / cover;
}

#game {
  width: 400px;
  height: 600px;
  position: relative;
  overflow: hidden;
  background: url("IMG-20250630-WA0064.jpg") repeat-y;
  border-radius: 16px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.6);
  animation: bgMove 10s linear infinite;
}

@keyframes bgMove {
  from { background-position: 0 0; }
  to { background-position: 0 100%; }
}

#player {
  width: 50px;
  height: 70px;
  background: linear-gradient(#00eaff, #0044ff);
  clip-path: polygon(
    50% 0%, 90% 25%, 70% 25%,
    70% 100%, 30% 100%, 30% 25%, 10% 25%
  );
  position: absolute;
  bottom: 20px;
  left: 175px;
}

.bullet {
  width: 6px;
  height: 12px;
  background: yellow;
  position: absolute;
  border-radius: 4px;
}

.enemy {
  width: 40px;
  height: 40px;
  background: red;
  position: absolute;
  border-radius: 8px;
}

#info {
  position: absolute;
  top: 10px;
  left: 10px;
  color: white;
  font-weight: bold;
  font-size: 16px;
}

#controls {
  position: absolute;
  top: 10px;
  right: 10px;
}

button {
  background: rgba(0,0,0,0.6);
  color: white;
  border: none;
  padding: 6px 10px;
  margin-left: 5px;
  border-radius: 6px;
  cursor: pointer;
}
button:hover {
  background: rgba(255,255,255,0.3);
}
</style>
</head>

<body>

<div id="game">
  <div id="info">‚ù§Ô∏è Nyawa: <span id="life">3</span></div>

  <div id="controls">
    <button id="pauseBtn">‚è∏ Pause</button>
    <button id="muteBtn">üîä Mute</button>
  </div>

  <div id="player"></div>
</div>

<audio id="music" autoplay loop>
  <source src="Aku_Jeje_-_Lihat_Kebunku_(Taman_Bunga)_#lyricvideo_128k.mp3" type="audio/mpeg">
</audio>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const lifeText = document.getElementById("life");
const pauseBtn = document.getElementById("pauseBtn");
const muteBtn = document.getElementById("muteBtn");
const music = document.getElementById("music");

let left = 175;
let life = 3;
let paused = false;
let enemyInterval;

/* GERAK */
document.addEventListener("keydown", e => {
  if (paused) return;

  if (e.key === "ArrowLeft" && left > 0) left -= 20;
  if (e.key === "ArrowRight" && left < 350) left += 20;
  player.style.left = left + "px";

  if (e.key === " ") shoot();
});

/* TEMBAK */
function shoot() {
  const bullet = document.createElement("div");
  bullet.className = "bullet";
  bullet.style.left = left + 22 + "px";
  bullet.style.bottom = "90px";
  game.appendChild(bullet);

  const move = setInterval(() => {
    if (paused) return;
    bullet.style.bottom = parseInt(bullet.style.bottom) + 10 + "px";
    if (parseInt(bullet.style.bottom) > 600) {
      bullet.remove();
      clearInterval(move);
    }
  }, 30);
}

/* MUSUH */
function spawnEnemy() {
  if (paused) return;

  const enemy = document.createElement("div");
  enemy.className = "enemy";
  enemy.style.left = Math.random() * 360 + "px";
  enemy.style.top = "0px";
  game.appendChild(enemy);

  const move = setInterval(() => {
    if (paused) return;

    enemy.style.top = parseInt(enemy.style.top) + 3 + "px";
    if (parseInt(enemy.style.top) > 560) {
      enemy.remove();
      clearInterval(move);
      life--;
      lifeText.textContent = life;
      if (life === 0) {
        alert("GAME OVER");
        location.reload();
      }
    }
  }, 30);
}

enemyInterval = setInterval(spawnEnemy, 1500);

/* PAUSE */
pauseBtn.onclick = () => {
  paused = !paused;
  pauseBtn.textContent = paused ? "‚ñ∂ Lanjut" : "‚è∏ Pause";
};

/* MUTE */
muteBtn.onclick = () => {
  music.muted = !music.muted;
  muteBtn.textContent = music.muted ? "üîá Mute" : "üîä Sound";
};
</script>

</body>
</html>